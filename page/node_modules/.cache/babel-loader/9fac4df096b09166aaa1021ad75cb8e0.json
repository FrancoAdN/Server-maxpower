{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\page\\\\src\\\\_useChat.js\";\nimport React, { createContext, useState, useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nexport const SockContext = createContext();\nexport default function ChatProv(props) {\n  const socket = useRef();\n  const d_chats = [{\n    socket_id: 'sock-1',\n    name: 'Franco',\n    messages: [{\n      from: 0,\n      msg: 'Bienvenido al chat de maxpower Franco'\n    }, {\n      from: 1,\n      msg: 'Bienvenido al chat de maxpower Franco'\n    }, {\n      from: 0,\n      msg: 'test Franco'\n    }]\n  }, {\n    socket_id: 'sock-2',\n    name: 'Tomas',\n    messages: [{\n      from: 0,\n      msg: 'Bienvenido al chat de maxpower Tomas'\n    }, {\n      from: 1,\n      msg: 'Hola server'\n    }, {\n      from: 1,\n      msg: 'pedido de cotizacion'\n    }]\n  }, {\n    socket_id: 'sock-3',\n    name: 'Leonel',\n    messages: [{\n      from: 0,\n      msg: 'Bienvenido al chat de maxpower Leonel'\n    }, {\n      from: 1,\n      msg: 'Hola maxpa'\n    }, {\n      from: 1,\n      msg: 'como va?'\n    }]\n  }];\n  const [chats, setChats] = useState(d_chats);\n  useEffect(() => {\n    socket.current = io(\"http://localhost:5000\"); //socket.current.emit('client')\n\n    socket.current.on(\"server_resp\", data => {\n      console.log(data);\n    });\n    return () => {\n      socket.current.disconnect();\n    };\n  }, []);\n\n  const sendMessageServer = data => {\n    const c_chats = [...chats];\n    c_chats.map(ch => {\n      if (ch.socket_id == data.to) {}\n    });\n\n    for (let ch of c_chats) {\n      if (ch.socket_id === data.to) {\n        ch.messages.push({\n          from: 0,\n          msg: data.txt\n        });\n        break;\n      }\n    }\n\n    setChats(chats => [...chats, chats]);\n    console.log(c_chats);\n    console.log(c_chats == chats);\n    /*setMessages(messages => [...messages, data])\r\n    socket.current.emit(\"client_message\", data)*/\n  };\n\n  return /*#__PURE__*/React.createElement(SockContext.Provider, {\n    value: {\n      chats,\n      sendMessageServer\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, props.children);\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/page/src/_useChat.js"],"names":["React","createContext","useState","useRef","useEffect","io","SockContext","ChatProv","props","socket","d_chats","socket_id","name","messages","from","msg","chats","setChats","current","on","data","console","log","disconnect","sendMessageServer","c_chats","map","ch","to","push","txt","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useRef, useEffect } from 'react'\r\nimport io from 'socket.io-client'\r\n\r\nexport const SockContext = createContext()\r\n\r\n\r\n\r\nexport default function ChatProv(props) {\r\n\r\n    const socket = useRef()\r\n\r\n    const d_chats = [\r\n        {\r\n            socket_id: 'sock-1',\r\n            name: 'Franco',\r\n            messages: [\r\n                { from: 0, msg: 'Bienvenido al chat de maxpower Franco' },\r\n                { from: 1, msg: 'Bienvenido al chat de maxpower Franco' },\r\n                { from: 0, msg: 'test Franco' }\r\n            ]\r\n        },\r\n        {\r\n            socket_id: 'sock-2',\r\n            name: 'Tomas',\r\n            messages: [\r\n                { from: 0, msg: 'Bienvenido al chat de maxpower Tomas' },\r\n                { from: 1, msg: 'Hola server' },\r\n                { from: 1, msg: 'pedido de cotizacion' }\r\n            ]\r\n        },\r\n        {\r\n            socket_id: 'sock-3',\r\n            name: 'Leonel',\r\n            messages: [\r\n                { from: 0, msg: 'Bienvenido al chat de maxpower Leonel' },\r\n                { from: 1, msg: 'Hola maxpa' },\r\n                { from: 1, msg: 'como va?' }\r\n            ]\r\n        },\r\n    ]\r\n    const [chats, setChats] = useState(d_chats)\r\n\r\n    useEffect(() => {\r\n        socket.current = io(\"http://localhost:5000\")\r\n\r\n        //socket.current.emit('client')\r\n\r\n        socket.current.on(\"server_resp\", (data) => {\r\n            console.log(data);\r\n        });\r\n\r\n        return () => {\r\n            socket.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n\r\n    const sendMessageServer = (data) => {\r\n        const c_chats = [...chats]\r\n        c_chats.map(ch => {\r\n            if (ch.socket_id == data.to) {\r\n\r\n            }\r\n        })\r\n        for (let ch of c_chats) {\r\n            if (ch.socket_id === data.to) {\r\n                ch.messages.push({\r\n                    from: 0,\r\n                    msg: data.txt\r\n                })\r\n                break\r\n            }\r\n        }\r\n        setChats(chats => [...chats, chats])\r\n        console.log(c_chats)\r\n        console.log(c_chats == chats)\r\n        /*setMessages(messages => [...messages, data])\r\n        socket.current.emit(\"client_message\", data)*/\r\n    };\r\n\r\n    return (\r\n        <SockContext.Provider value={{ chats, sendMessageServer }}>\r\n            {props.children}\r\n        </SockContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}